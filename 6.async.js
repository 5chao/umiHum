"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[484],{19943:function(ne,I,r){r.r(I),r.d(I,{default:function(){return he}});var R=r(66933),T=r.n(R),F=r(93450),L=r.n(F),A=r(29883),U=r.n(A),h=r(94043),n=r.n(h),z=r(97949),P=r(18277),M=r(19813),V=r(90407),K=r(37176),p=r(48086),W=r(27049),b=r(71577),Y=r(25084),S=r(67294),G=r(50146),e=r(85893),u=function(t){var l=t.modalVisible,i=t.onCancel;return(0,e.jsx)(G.Z,{destroyOnClose:!0,title:"\u65B0\u5EFA",width:420,visible:l,onCancel:function(){return i()},footer:null,children:t.children})},y=u,f=r(11296),o=r(5966),C=r(90672),E=r(64317),te=r(86615),ue=r(22452),se=function(t){return(0,e.jsxs)(f.L,{stepsProps:{size:"small"},stepsFormRender:function(i,g){return(0,e.jsx)(G.Z,{width:640,bodyStyle:{padding:"32px 40px 48px"},destroyOnClose:!0,title:"\u89C4\u5219\u914D\u7F6E",visible:t.updateModalVisible,footer:g,onCancel:function(){return t.onCancel()},children:i})},onFinish:t.onSubmit,children:[(0,e.jsxs)(f.L.StepForm,{initialValues:{name:t.values.name,nickName:t.values.nickName},title:"\u57FA\u672C\u4FE1\u606F",children:[(0,e.jsx)(o.Z,{width:"md",name:"name",label:"\u89C4\u5219\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u89C4\u5219\u540D\u79F0\uFF01"}]}),(0,e.jsx)(C.Z,{name:"desc",width:"md",label:"\u89C4\u5219\u63CF\u8FF0",placeholder:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26\u7684\u89C4\u5219\u63CF\u8FF0\uFF01",min:5}]})]}),(0,e.jsxs)(f.L.StepForm,{initialValues:{target:"0",template:"0"},title:"\u914D\u7F6E\u89C4\u5219\u5C5E\u6027",children:[(0,e.jsx)(E.Z,{width:"md",name:"target",label:"\u76D1\u63A7\u5BF9\u8C61",valueEnum:{0:"\u8868\u4E00",1:"\u8868\u4E8C"}}),(0,e.jsx)(E.Z,{width:"md",name:"template",label:"\u89C4\u5219\u6A21\u677F",valueEnum:{0:"\u89C4\u5219\u6A21\u677F\u4E00",1:"\u89C4\u5219\u6A21\u677F\u4E8C"}}),(0,e.jsx)(te.Z.Group,{name:"type",width:"md",label:"\u89C4\u5219\u7C7B\u578B",options:[{value:"0",label:"\u5F3A"},{value:"1",label:"\u5F31"}]})]}),(0,e.jsxs)(f.L.StepForm,{initialValues:{type:"1",frequency:"month"},title:"\u8BBE\u5B9A\u8C03\u5EA6\u5468\u671F",children:[(0,e.jsx)(ue.Z,{name:"time",label:"\u5F00\u59CB\u65F6\u95F4",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5F00\u59CB\u65F6\u95F4\uFF01"}]}),(0,e.jsx)(E.Z,{name:"frequency",label:"\u76D1\u63A7\u5BF9\u8C61",width:"xs",valueEnum:{month:"\u6708",week:"\u5468"}})]})]})},le=se,N=z.Z.UserController,ie=N.addUser,de=N.queryUserList,oe=N.deleteUser,ce=N.modifyUser,me=function(){var w=U()(n().mark(function t(l){var i;return n().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i=p.ZP.loading("\u6B63\u5728\u6DFB\u52A0"),a.prev=1,a.next=4,ie(L()({},l));case 4:return i(),p.ZP.success("\u6DFB\u52A0\u6210\u529F"),a.abrupt("return",!0);case 9:return a.prev=9,a.t0=a.catch(1),i(),p.ZP.error("\u6DFB\u52A0\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),a.abrupt("return",!1);case 14:case"end":return a.stop()}},t,null,[[1,9]])}));return function(l){return w.apply(this,arguments)}}(),ve=function(){var w=U()(n().mark(function t(l){var i;return n().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i=p.ZP.loading("\u6B63\u5728\u914D\u7F6E"),a.prev=1,a.next=4,ce({userId:l.id||""},{name:l.name||"",nickName:l.nickName||"",email:l.email||""});case 4:return i(),p.ZP.success("\u914D\u7F6E\u6210\u529F"),a.abrupt("return",!0);case 9:return a.prev=9,a.t0=a.catch(1),i(),p.ZP.error("\u914D\u7F6E\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),a.abrupt("return",!1);case 14:case"end":return a.stop()}},t,null,[[1,9]])}));return function(l){return w.apply(this,arguments)}}(),fe=function(){var w=U()(n().mark(function t(l){var i,g;return n().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(i=p.ZP.loading("\u6B63\u5728\u5220\u9664"),l){c.next=3;break}return c.abrupt("return",!0);case 3:return c.prev=3,c.next=6,oe({userId:((g=l.find(function(H){return H.id}))===null||g===void 0?void 0:g.id)||""});case 6:return i(),p.ZP.success("\u5220\u9664\u6210\u529F\uFF0C\u5373\u5C06\u5237\u65B0"),c.abrupt("return",!0);case 11:return c.prev=11,c.t0=c.catch(3),i(),p.ZP.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),c.abrupt("return",!1);case 16:case"end":return c.stop()}},t,null,[[3,11]])}));return function(l){return w.apply(this,arguments)}}(),pe=function(){var t=(0,S.useState)(!1),l=T()(t,2),i=l[0],g=l[1],a=(0,S.useState)(!1),c=T()(a,2),H=c[0],J=c[1],ye=(0,S.useState)({}),q=T()(ye,2),Q=q[0],X=q[1],B=(0,S.useRef)(),Ce=(0,S.useState)(),_=T()(Ce,2),j=_[0],ge=_[1],Fe=(0,S.useState)([]),ee=T()(Fe,2),D=ee[0],re=ee[1],k=[{title:"\u540D\u79F0",dataIndex:"name",tip:"\u540D\u79F0\u662F\u552F\u4E00\u7684 key",formItemProps:{rules:[{required:!0,message:"\u540D\u79F0\u4E3A\u5FC5\u586B\u9879"}]}},{title:"\u6635\u79F0",dataIndex:"nickName",valueType:"text"},{title:"\u6027\u522B",dataIndex:"gender",hideInForm:!0,valueEnum:{0:{text:"\u7537",status:"MALE"},1:{text:"\u5973",status:"FEMALE"}}},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(d,s){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("a",{onClick:function(){J(!0),X(s)},children:"\u914D\u7F6E"}),(0,e.jsx)(W.Z,{type:"vertical"}),(0,e.jsx)("a",{href:"",children:"\u8BA2\u9605\u8B66\u62A5"})]})}}];return(0,e.jsxs)(P.ZP,{header:{title:"CRUD \u793A\u4F8B"},children:[(0,e.jsx)(M.Z,{headerTitle:"\u67E5\u8BE2\u8868\u683C",actionRef:B,rowKey:"id",search:{labelWidth:120},toolBarRender:function(){return[(0,e.jsx)(b.Z,{type:"primary",onClick:function(){return g(!0)},children:"\u65B0\u5EFA"},"1")]},request:function(){var m=U()(n().mark(function d(s,Z,x){var v,O,ae;return n().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,de(L()(L()({},s),{},{pageSize:50,sorter:Z,filter:x}));case 2:return v=$.sent,O=v.data,ae=v.success,$.abrupt("return",{data:(O==null?void 0:O.list)||[],success:ae});case 6:case"end":return $.stop()}},d)}));return function(d,s,Z){return m.apply(this,arguments)}}(),columns:k,params:{pageSize:50},rowSelection:{onChange:function(d,s){return re(s)}}}),(D==null?void 0:D.length)>0&&(0,e.jsxs)(V.Z,{extra:(0,e.jsxs)("div",{children:["\u5DF2\u9009\u62E9"," ",(0,e.jsx)("a",{style:{fontWeight:600},children:D.length})," ","\u9879\xA0\xA0"]}),children:[(0,e.jsx)(b.Z,{onClick:U()(n().mark(function m(){var d,s;return n().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,fe(D);case 2:re([]),(d=B.current)===null||d===void 0||(s=d.reloadAndRest)===null||s===void 0||s.call(d);case 4:case"end":return x.stop()}},m)})),children:"\u6279\u91CF\u5220\u9664"}),(0,e.jsx)(b.Z,{type:"primary",children:"\u6279\u91CF\u5BA1\u6279"})]}),(0,e.jsx)(y,{onCancel:function(){return g(!1)},modalVisible:i,children:(0,e.jsx)(M.Z,{onSubmit:function(){var m=U()(n().mark(function d(s){var Z;return n().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,me(s);case 2:Z=v.sent,Z&&(g(!1),B.current&&B.current.reload());case 4:case"end":return v.stop()}},d)}));return function(d){return m.apply(this,arguments)}}(),rowKey:"id",type:"form",columns:k})}),Q&&Object.keys(Q).length?(0,e.jsx)(le,{onSubmit:function(){var m=U()(n().mark(function d(s){var Z;return n().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,ve(s);case 2:Z=v.sent,Z&&(J(!1),X({}),B.current&&B.current.reload());case 4:case"end":return v.stop()}},d)}));return function(d){return m.apply(this,arguments)}}(),onCancel:function(){J(!1),X({})},updateModalVisible:H,values:Q}):null,(0,e.jsx)(Y.Z,{width:600,visible:!!j,onClose:function(){ge(void 0)},closable:!1,children:(j==null?void 0:j.name)&&(0,e.jsx)(K.vY,{column:2,title:j==null?void 0:j.name,request:U()(n().mark(function m(){return n().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",{data:j||{}});case 1:case"end":return s.stop()}},m)})),params:{id:j==null?void 0:j.name,pageSize:50},columns:k})})]})},he=pe},97949:function(ne,I,r){r.d(I,{Z:function(){return G}});var R={};r.r(R),r.d(R,{addUser:function(){return M},deleteUser:function(){return Y},getUserDetail:function(){return K},modifyUser:function(){return W},queryUserList:function(){return z}});var T=r(93450),F=r.n(T),L=r(29883),A=r.n(L),U=r(94043),h=r.n(U),n=r(13831);function z(e,u){return P.apply(this,arguments)}function P(){return P=A()(h().mark(function e(u,y){return h().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,n.request)("/api/v1/queryUserList",F()({method:"GET",params:F()({},u)},y||{})));case 1:case"end":return o.stop()}},e)})),P.apply(this,arguments)}function M(e,u){return V.apply(this,arguments)}function V(){return V=A()(h().mark(function e(u,y){return h().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,n.request)("/api/v1/user",F()({method:"POST",headers:{"Content-Type":"application/json"},data:u},y||{})));case 1:case"end":return o.stop()}},e)})),V.apply(this,arguments)}function K(e,u){return p.apply(this,arguments)}function p(){return p=A()(h().mark(function e(u,y){var f;return h().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return f=u.userId,C.abrupt("return",(0,n.request)("/api/v1/user/".concat(f),F()({method:"GET",params:F()({},u)},y||{})));case 2:case"end":return C.stop()}},e)})),p.apply(this,arguments)}function W(e,u,y){return b.apply(this,arguments)}function b(){return b=A()(h().mark(function e(u,y,f){var o;return h().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return o=u.userId,E.abrupt("return",(0,n.request)("/api/v1/user/".concat(o),F()({method:"PUT",headers:{"Content-Type":"application/json"},params:F()({},u),data:y},f||{})));case 2:case"end":return E.stop()}},e)})),b.apply(this,arguments)}function Y(e,u){return S.apply(this,arguments)}function S(){return S=A()(h().mark(function e(u,y){var f;return h().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return f=u.userId,C.abrupt("return",(0,n.request)("/api/v1/user/".concat(f),F()({method:"DELETE",params:F()({},u)},y||{})));case 2:case"end":return C.stop()}},e)})),S.apply(this,arguments)}var G={UserController:R}}}]);
