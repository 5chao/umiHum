"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[436],{15621:function(ae,O,e){e.r(O),e.d(O,{default:function(){return pe}});var P=e(66933),T=e.n(P),g=e(93450),V=e.n(g),b=e(29883),S=e.n(b),y=e(94043),a=e.n(y),W=e(97949),A=e(19813),Y=e(90407),D=e(37176),F=e(48086),I=e(27049),M=e(71577),G=e(25084),E=e(67294),B=e(50146),r=e(85893),o=function(t){var l=t.modalVisible,i=t.onCancel;return(0,r.jsx)(B.Z,{destroyOnClose:!0,title:"\u65B0\u5EFA",width:420,visible:l,onCancel:function(){return i()},footer:null,children:t.children})},u=o,m=e(11296),j=e(5966),c=e(90672),h=e(64317),$=e(86615),te=e(22452),ue=function(t){return(0,r.jsxs)(m.L,{stepsProps:{size:"small"},stepsFormRender:function(i,C){return(0,r.jsx)(B.Z,{width:640,bodyStyle:{padding:"32px 40px 48px"},destroyOnClose:!0,title:"\u89C4\u5219\u914D\u7F6E",visible:t.updateModalVisible,footer:C,onCancel:function(){return t.onCancel()},children:i})},onFinish:t.onSubmit,children:[(0,r.jsxs)(m.L.StepForm,{initialValues:{name:t.values.name,nickName:t.values.nickName},title:"\u57FA\u672C\u4FE1\u606F",children:[(0,r.jsx)(j.Z,{width:"md",name:"name",label:"\u89C4\u5219\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u89C4\u5219\u540D\u79F0\uFF01"}]}),(0,r.jsx)(c.Z,{name:"desc",width:"md",label:"\u89C4\u5219\u63CF\u8FF0",placeholder:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26\u7684\u89C4\u5219\u63CF\u8FF0\uFF01",min:5}]})]}),(0,r.jsxs)(m.L.StepForm,{initialValues:{target:"0",template:"0"},title:"\u914D\u7F6E\u89C4\u5219\u5C5E\u6027",children:[(0,r.jsx)(h.Z,{width:"md",name:"target",label:"\u76D1\u63A7\u5BF9\u8C61",valueEnum:{0:"\u8868\u4E00",1:"\u8868\u4E8C"}}),(0,r.jsx)(h.Z,{width:"md",name:"template",label:"\u89C4\u5219\u6A21\u677F",valueEnum:{0:"\u89C4\u5219\u6A21\u677F\u4E00",1:"\u89C4\u5219\u6A21\u677F\u4E8C"}}),(0,r.jsx)($.Z.Group,{name:"type",width:"md",label:"\u89C4\u5219\u7C7B\u578B",options:[{value:"0",label:"\u5F3A"},{value:"1",label:"\u5F31"}]})]}),(0,r.jsxs)(m.L.StepForm,{initialValues:{type:"1",frequency:"month"},title:"\u8BBE\u5B9A\u8C03\u5EA6\u5468\u671F",children:[(0,r.jsx)(te.Z,{name:"time",label:"\u5F00\u59CB\u65F6\u95F4",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5F00\u59CB\u65F6\u95F4\uFF01"}]}),(0,r.jsx)(h.Z,{name:"frequency",label:"\u76D1\u63A7\u5BF9\u8C61",width:"xs",valueEnum:{month:"\u6708",week:"\u5468"}})]})]})},se=ue,z=W.Z.UserController,le=z.addUser,ie=z.queryUserList,de=z.deleteUser,oe=z.modifyUser,ce=function(){var w=S()(a().mark(function t(l){var i;return a().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=F.ZP.loading("\u6B63\u5728\u6DFB\u52A0"),n.prev=1,n.next=4,le(V()({},l));case 4:return i(),F.ZP.success("\u6DFB\u52A0\u6210\u529F"),n.abrupt("return",!0);case 9:return n.prev=9,n.t0=n.catch(1),i(),F.ZP.error("\u6DFB\u52A0\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),n.abrupt("return",!1);case 14:case"end":return n.stop()}},t,null,[[1,9]])}));return function(l){return w.apply(this,arguments)}}(),me=function(){var w=S()(a().mark(function t(l){var i;return a().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=F.ZP.loading("\u6B63\u5728\u914D\u7F6E"),n.prev=1,n.next=4,oe({userId:l.id||""},{name:l.name||"",nickName:l.nickName||"",email:l.email||""});case 4:return i(),F.ZP.success("\u914D\u7F6E\u6210\u529F"),n.abrupt("return",!0);case 9:return n.prev=9,n.t0=n.catch(1),i(),F.ZP.error("\u914D\u7F6E\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),n.abrupt("return",!1);case 14:case"end":return n.stop()}},t,null,[[1,9]])}));return function(l){return w.apply(this,arguments)}}(),ve=function(){var w=S()(a().mark(function t(l){var i,C;return a().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(i=F.ZP.loading("\u6B63\u5728\u5220\u9664"),l){v.next=3;break}return v.abrupt("return",!0);case 3:return v.prev=3,v.next=6,de({userId:((C=l.find(function(H){return H.id}))===null||C===void 0?void 0:C.id)||""});case 6:return i(),F.ZP.success("\u5220\u9664\u6210\u529F\uFF0C\u5373\u5C06\u5237\u65B0"),v.abrupt("return",!0);case 11:return v.prev=11,v.t0=v.catch(3),i(),F.ZP.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),v.abrupt("return",!1);case 16:case"end":return v.stop()}},t,null,[[3,11]])}));return function(l){return w.apply(this,arguments)}}(),fe=function(){var t=(0,E.useState)(!1),l=T()(t,2),i=l[0],C=l[1],n=(0,E.useState)(!1),v=T()(n,2),H=v[0],J=v[1],he=(0,E.useState)({}),q=T()(he,2),Q=q[0],X=q[1],L=(0,E.useRef)(),ye=(0,E.useState)(),_=T()(ye,2),U=_[0],Ce=_[1],ge=(0,E.useState)([]),ee=T()(ge,2),N=ee[0],re=ee[1],k=[{title:"\u540D\u79F0",dataIndex:"name",tip:"\u540D\u79F0\u662F\u552F\u4E00\u7684 key",formItemProps:{rules:[{required:!0,message:"\u540D\u79F0\u4E3A\u5FC5\u586B\u9879"}]}},{title:"\u6635\u79F0",dataIndex:"nickName",valueType:"text"},{title:"\u6027\u522B",dataIndex:"gender",hideInForm:!0,valueEnum:{0:{text:"\u7537",status:"MALE"},1:{text:"\u5973",status:"FEMALE"}}},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(d,s){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("a",{onClick:function(){J(!0),X(s)},children:"\u914D\u7F6E"}),(0,r.jsx)(I.Z,{type:"vertical"}),(0,r.jsx)("a",{href:"",children:"\u8BA2\u9605\u8B66\u62A5"})]})}}];return(0,r.jsxs)(E.Fragment,{children:[(0,r.jsx)(A.Z,{headerTitle:"\u67E5\u8BE2\u8868\u683C",actionRef:L,rowKey:"id",search:{labelWidth:120},toolBarRender:function(){return[(0,r.jsx)(M.Z,{type:"primary",onClick:function(){return C(!0)},children:"\u65B0\u5EFA"},"1")]},request:function(){var f=S()(a().mark(function d(s,Z,x){var p,K,ne;return a().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,ie(V()(V()({},s),{},{sorter:Z,filter:x}));case 2:return p=R.sent,K=p.data,ne=p.success,R.abrupt("return",{data:(K==null?void 0:K.list)||[],success:ne});case 6:case"end":return R.stop()}},d)}));return function(d,s,Z){return f.apply(this,arguments)}}(),columns:k,rowSelection:{onChange:function(d,s){return re(s)}}}),(N==null?void 0:N.length)>0&&(0,r.jsxs)(Y.Z,{extra:(0,r.jsxs)("div",{children:["\u5DF2\u9009\u62E9"," ",(0,r.jsx)("a",{style:{fontWeight:600},children:N.length})," ","\u9879\xA0\xA0"]}),children:[(0,r.jsx)(M.Z,{onClick:S()(a().mark(function f(){var d,s;return a().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,ve(N);case 2:re([]),(d=L.current)===null||d===void 0||(s=d.reloadAndRest)===null||s===void 0||s.call(d);case 4:case"end":return x.stop()}},f)})),children:"\u6279\u91CF\u5220\u9664"}),(0,r.jsx)(M.Z,{type:"primary",children:"\u6279\u91CF\u5BA1\u6279"})]}),(0,r.jsx)(u,{onCancel:function(){return C(!1)},modalVisible:i,children:(0,r.jsx)(A.Z,{onSubmit:function(){var f=S()(a().mark(function d(s){var Z;return a().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,ce(s);case 2:Z=p.sent,Z&&(C(!1),L.current&&L.current.reload());case 4:case"end":return p.stop()}},d)}));return function(d){return f.apply(this,arguments)}}(),rowKey:"id",type:"form",columns:k})}),Q&&Object.keys(Q).length?(0,r.jsx)(se,{onSubmit:function(){var f=S()(a().mark(function d(s){var Z;return a().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,me(s);case 2:Z=p.sent,Z&&(J(!1),X({}),L.current&&L.current.reload());case 4:case"end":return p.stop()}},d)}));return function(d){return f.apply(this,arguments)}}(),onCancel:function(){J(!1),X({})},updateModalVisible:H,values:Q}):null,(0,r.jsx)(G.Z,{width:600,visible:!!U,onClose:function(){Ce(void 0)},closable:!1,children:(U==null?void 0:U.name)&&(0,r.jsx)(D.vY,{column:2,title:U==null?void 0:U.name,request:S()(a().mark(function f(){return a().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",{data:U||{}});case 1:case"end":return s.stop()}},f)})),params:{id:U==null?void 0:U.name,pageSize:50},columns:k})})]})},pe=fe},97949:function(ae,O,e){e.d(O,{Z:function(){return r}});var P={};e.r(P),e.d(P,{addUser:function(){return Y},deleteUser:function(){return E},getUserDetail:function(){return F},modifyUser:function(){return M},queryUserList:function(){return W}});var T=e(93450),g=e.n(T),V=e(29883),b=e.n(V),S=e(94043),y=e.n(S),a=e(13831);function W(o,u){return A.apply(this,arguments)}function A(){return A=b()(y().mark(function o(u,m){return y().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,a.request)("/api/v1/queryUserList",g()({method:"GET",params:g()({},u)},m||{})));case 1:case"end":return c.stop()}},o)})),A.apply(this,arguments)}function Y(o,u){return D.apply(this,arguments)}function D(){return D=b()(y().mark(function o(u,m){return y().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,a.request)("/api/v1/user",g()({method:"POST",headers:{"Content-Type":"application/json"},data:u},m||{})));case 1:case"end":return c.stop()}},o)})),D.apply(this,arguments)}function F(o,u){return I.apply(this,arguments)}function I(){return I=b()(y().mark(function o(u,m){var j;return y().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return j=u.userId,h.abrupt("return",(0,a.request)("/api/v1/user/".concat(j),g()({method:"GET",params:g()({},u)},m||{})));case 2:case"end":return h.stop()}},o)})),I.apply(this,arguments)}function M(o,u,m){return G.apply(this,arguments)}function G(){return G=b()(y().mark(function o(u,m,j){var c;return y().wrap(function($){for(;;)switch($.prev=$.next){case 0:return c=u.userId,$.abrupt("return",(0,a.request)("/api/v1/user/".concat(c),g()({method:"PUT",headers:{"Content-Type":"application/json"},params:g()({},u),data:m},j||{})));case 2:case"end":return $.stop()}},o)})),G.apply(this,arguments)}function E(o,u){return B.apply(this,arguments)}function B(){return B=b()(y().mark(function o(u,m){var j;return y().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return j=u.userId,h.abrupt("return",(0,a.request)("/api/v1/user/".concat(j),g()({method:"DELETE",params:g()({},u)},m||{})));case 2:case"end":return h.stop()}},o)})),B.apply(this,arguments)}var r={UserController:P}}}]);
